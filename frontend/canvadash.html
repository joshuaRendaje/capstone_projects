<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Oyster AI Monitoring & Management System</title>

  <!-- Tailwind CDN for elegant styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config for custom font and colors
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['Poppins', 'ui-sans-serif', 'system-ui'],
            body: ['Inter', 'ui-sans-serif', 'system-ui'],
          },
          colors: {
            ocean: {
              50: '#e9fbff',
              100: '#d2f6ff',
              200: '#a7eaff',
              300: '#73d9ff',
              400: '#39c2ff',
              500: '#0aa3e0',
              600: '#0582b3',
              700: '#04658c',
              800: '#054e6d',
              900: '#063f57'
            },
            sea: {
              100: '#e8fff9',
              200: '#c8fff0',
              300: '#95ffe2',
              400: '#4ff0cb',
              500: '#17c9a4',
              600: '#10a285',
              700: '#0d866e',
              800: '#0a6b59',
              900: '#074f43'
            }
          },
          boxShadow: {
            soft: '0 10px 25px rgba(3, 80, 110, 0.15)',
            glow: '0 8px 20px rgba(23, 201, 164, 0.35)'
          }
        }
      }
    }
  </script>

  <!-- Chart.js for real-time charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --ocean-blue: #0aa3e0;
      --sea-green: #17c9a4;
      --white: #ffffff;
      --light-gray: #eef6f9;
      --ink: #063f57;
    }
    /* Smooth transitions and base feel */
    * { scroll-behavior: smooth; }
    .smooth { transition: all .3s ease; }

    /* Sticky navbar shadow on scroll (class toggled via JS) */
    .nav-elevated { box-shadow: 0 8px 24px rgba(6,63,87,.18); }

    /* Ocean gradient background for hero */
    .ocean-hero {
      background: radial-gradient(1200px 600px at 10% 20%, rgba(255,255,255,0.25), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(23,201,164,0.18), transparent 60%),
                  linear-gradient(180deg, #0aa3e0 0%, #04658c 100%);
    }

    /* Glass card style */
    .glass {
      background: rgba(255,255,255,0.9);
      backdrop-filter: saturate(140%) blur(6px);
      -webkit-backdrop-filter: saturate(140%) blur(6px);
    }

    /* Mobile menu slide */
    .slide-enter { transform: translateY(-12px); opacity: 0; }
    .slide-enter-active { transform: translateY(0); opacity: 1; transition: all .25s ease; }
    .slide-exit { transform: translateY(0); opacity: 1; }
    .slide-exit-active { transform: translateY(-12px); opacity: 0; transition: all .2s ease; }

    /* Monitoring table: card style for small screens */
    @media (max-width: 767px) {
      .table-wrapper { overflow-x: auto; }
      .data-row { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
      .data-row > div { padding: .4rem .5rem; border-radius: .5rem; background: #ffffff; }
      .data-label { color: #04658c; font-weight: 600; }
      .data-value { color: #063f57; }
    }

    /* Form inputs glow on focus */
    .focus-glow:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(23, 201, 164, 0.25);
      border-color: var(--sea-green);
    }

    /* Section spacing rhythm */
    section { scroll-margin-top: 90px; }

    /* Media queries for layout tweaks */
    @media (min-width: 768px) {
      .stats-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; }
      .about-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1.25rem; }
      .contact-grid { display: grid; grid-template-columns: 1fr 1.2fr; gap: 1.25rem; align-items: stretch; }
    }
    @media (min-width: 1024px) {
      .stats-grid { grid-template-columns: repeat(3, minmax(0,1fr)); gap: 1.25rem; }
      .about-grid { grid-template-columns: repeat(3, minmax(0,1fr)); gap: 1.5rem; }
      .about-grid.cols-4 { grid-template-columns: repeat(4, minmax(0,1fr)); }
    }
  </style>
</head>
<body class="bg-[var(--light-gray)] text-[var(--ink)] font-body">

  <!-- Navbar -->
  <header id="navbar" class="fixed top-0 inset-x-0 z-50 bg-white/90 backdrop-blur border-b border-ocean-100 smooth">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="#home" class="flex items-center gap-2 group">
          <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-sea-400 to-ocean-500 grid place-items-center shadow-glow">
            <!-- Simple wave logo -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M3 12c2.5 0 2.5-3 5-3s2.5 3 5 3 2.5-3 5-3 2.5 3 3 3" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <span class="font-display text-lg font-semibold text-ocean-800">Oyster AI</span>
        </a>

        <!-- Desktop nav -->
        <nav class="hidden md:flex items-center gap-6">
          <a href="#home" class="text-ocean-900/80 hover:text-ocean-900 smooth">Home</a>
          <a href="#monitoring" class="text-ocean-900/80 hover:text-ocean-900 smooth">Monitoring</a>
          <a href="#reports" class="text-ocean-900/80 hover:text-ocean-900 smooth">Reports</a>
          <a href="#about" class="text-ocean-900/80 hover:text-ocean-900 smooth">About</a>
          <a href="#contact" class="text-ocean-900/80 hover:text-ocean-900 smooth">Contact</a>
        </nav>

        <!-- Mobile hamburger -->
        <button id="menuBtn" aria-label="Open menu" class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg border border-ocean-100 bg-white hover:bg-ocean-50 text-ocean-700 smooth">
          <span id="menuIcon" class="block">
            <!-- Hamburger icon -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="md:hidden hidden border-t border-ocean-100 bg-white">
      <div class="px-4 py-3 flex flex-col">
        <a href="#home" class="py-2 text-ocean-900/90 hover:text-ocean-900 smooth">Home</a>
        <a href="#monitoring" class="py-2 text-ocean-900/90 hover:text-ocean-900 smooth">Monitoring</a>
        <a href="#reports" class="py-2 text-ocean-900/90 hover:text-ocean-900 smooth">Reports</a>
        <a href="#about" class="py-2 text-ocean-900/90 hover:text-ocean-900 smooth">About</a>
        <a href="#contact" class="py-2 text-ocean-900/90 hover:text-ocean-900 smooth">Contact</a>
      </div>
    </div>
  </header>

  <main class="pt-20">

    <!-- Home / Dashboard -->
    <section id="home" class="ocean-hero text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24">
        <div class="grid lg:grid-cols-2 gap-10 items-center">
          <div>
            <h1 class="font-display text-4xl sm:text-5xl font-semibold leading-tight">Oyster AI Monitoring & Management</h1>
            <p class="mt-4 text-white/90 text-lg">Smart Oyster Monitoring and AI-powered Insights</p>
            <div class="mt-8 flex flex-wrap gap-3">
              <a href="#monitoring" class="inline-flex items-center gap-2 bg-sea-500 hover:bg-sea-600 text-white font-medium px-5 py-3 rounded-xl shadow-glow smooth">
                Start Monitoring
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M13 5l7 7-7 7" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </a>
              <a href="#reports" class="inline-flex items-center gap-2 bg-white/15 hover:bg-white/25 text-white font-medium px-5 py-3 rounded-xl border border-white/30 smooth">
                View Reports
              </a>
            </div>
          </div>

          <!-- Decorative hero card -->
          <div class="glass rounded-2xl p-6 shadow-soft">
            <div class="flex items-center justify-between">
              <h3 class="font-display text-ocean-900 text-xl">Live Snapshot</h3>
              <span class="inline-flex items-center gap-2 text-sea-700 bg-sea-100 px-3 py-1 rounded-full text-sm">
                <span class="w-2 h-2 rounded-full bg-sea-500 animate-pulse"></span> Live
              </span>
            </div>
            <div class="mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div class="rounded-xl bg-ocean-50 p-4">
                <p class="text-ocean-700 font-medium">Water Quality</p>
                <p class="mt-2 text-ocean-900 text-2xl font-semibold"><span id="heroPH">8.1</span> pH</p>
                <p class="text-ocean-900/70"><span id="heroSal">35</span> PSU • <span id="heroTemp">18</span>°C</p>
              </div>
              <div class="rounded-xl bg-ocean-50 p-4">
                <p class="text-ocean-700 font-medium">Growth Rate</p>
                <p class="mt-2 text-ocean-900 text-2xl font-semibold"><span id="heroGrowth">1.4</span>%/wk</p>
                <p class="text-ocean-900/70">Last 7 days</p>
              </div>
              <div class="rounded-xl bg-ocean-50 p-4">
                <p class="text-ocean-700 font-medium">AI Predictions</p>
                <p class="mt-2 text-ocean-900 text-2xl font-semibold"><span id="heroHealthy">92</span>% Healthy</p>
                <p class="text-ocean-900/70"><span id="heroRisk">8</span>% At Risk</p>
              </div>
            </div>
            <p class="mt-5 text-ocean-900/80 text-sm">Data auto-updates every few seconds with simulated samples.</p>
          </div>
        </div>

        <!-- Stat Cards -->
        <div class="mt-10 stats-grid">
          <!-- Water Quality -->
          <div class="glass rounded-2xl p-6 shadow-soft">
            <div class="flex items-center justify-between">
              <h4 class="font-display text-ocean-900 text-lg">Water Quality</h4>
              <span class="text-sea-700 bg-sea-100 px-3 py-1 rounded-full text-xs">Stable</span>
            </div>
            <div class="mt-4 grid grid-cols-3 gap-3">
              <div class="bg-white rounded-xl p-4 text-center">
                <p class="text-ocean-700 text-sm">pH</p>
                <p class="text-2xl font-semibold text-ocean-900" id="cardPH">8.1</p>
              </div>
              <div class="bg-white rounded-xl p-4 text-center">
                <p class="text-ocean-700 text-sm">Salinity</p>
                <p class="text-2xl font-semibold text-ocean-900"><span id="cardSal">35</span></p>
              </div>
              <div class="bg-white rounded-xl p-4 text-center">
                <p class="text-ocean-700 text-sm">Temp</p>
                <p class="text-2xl font-semibold text-ocean-900"><span id="cardTemp">18</span>°</p>
              </div>
            </div>
          </div>
          <!-- Growth Rate -->
          <div class="glass rounded-2xl p-6 shadow-soft">
            <div class="flex items-center justify-between">
              <h4 class="font-display text-ocean-900 text-lg">Oyster Growth Rate</h4>
              <span class="text-ocean-700 bg-ocean-100 px-3 py-1 rounded-full text-xs">Weekly</span>
            </div>
            <div class="mt-4 bg-white rounded-xl p-5">
              <p class="text-4xl font-semibold text-ocean-900"><span id="cardGrowth">1.4</span>%</p>
              <p class="text-ocean-900/75 mt-1 text-sm">Average growth this week</p>
            </div>
          </div>
          <!-- AI Predictions -->
          <div class="glass rounded-2xl p-6 shadow-soft">
            <div class="flex items-center justify-between">
              <h4 class="font-display text-ocean-900 text-lg">AI Predictions</h4>
              <span class="text-ocean-700 bg-ocean-100 px-3 py-1 rounded-full text-xs">Forecast</span>
            </div>
            <div class="mt-4 grid grid-cols-2 gap-3">
              <div class="bg-white rounded-xl p-4 text-center">
                <p class="text-sea-700 text-sm">Healthy</p>
                <p class="text-3xl font-semibold text-sea-700"><span id="cardHealthy">92</span>%</p>
              </div>
              <div class="bg-white rounded-xl p-4 text-center">
                <p class="text-ocean-700 text-sm">At Risk</p>
                <p class="text-3xl font-semibold text-ocean-700"><span id="cardRisk">8</span>%</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Monitoring -->
    <section id="monitoring" class="py-14">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between">
          <h2 class="font-display text-2xl sm:text-3xl text-ocean-900">Monitoring</h2>
          <div class="flex items-center gap-3">
            <span class="text-sm text-ocean-800/80">Auto-updating</span>
            <span class="w-2.5 h-2.5 rounded-full bg-sea-500 animate-pulse"></span>
          </div>
        </div>

        <!-- Table (desktop/tablet) -->
        <div class="mt-6 hidden md:block glass rounded-2xl p-4 shadow-soft">
          <div class="table-wrapper">
            <table class="min-w-full">
              <thead class="bg-ocean-50 rounded-xl">
                <tr class="text-left text-ocean-800">
                  <th class="py-3 px-4">Date</th>
                  <th class="py-3 px-4">Time</th>
                  <th class="py-3 px-4">pH</th>
                  <th class="py-3 px-4">Salinity (PSU)</th>
                  <th class="py-3 px-4">Temperature (°C)</th>
                  <th class="py-3 px-4">TDS (ppm)</th>
                  <th class="py-3 px-4">Turbidity (NTU)</th>
                  <th class="py-3 px-4">Oyster Count</th>
                </tr>
              </thead>
              <tbody id="monitorTableBody">
                <!-- Rows injected by JS -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Card list (mobile) -->
        <div class="mt-6 md:hidden grid gap-3" id="monitorCards">
          <!-- Cards injected by JS -->
        </div>
      </div>
    </section>

    <!-- Reports (MVP - Single Card with Multiple Charts) -->
    <section id="reports" class="py-10 bg-white">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-4">
          <h2 class="font-display text-xl sm:text-2xl text-ocean-900">Reports</h2>
          <button id="resetCharts" class="inline-flex items-center gap-2 bg-ocean-600 hover:bg-ocean-700 text-white px-3 py-2 rounded-md smooth">Reset</button>
        </div>

        <div class="rounded-xl border border-ocean-100 bg-white p-4">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <!-- pH Chart -->
            <div>
              <div class="flex items-center gap-2 mb-2"><span class="w-2 h-2 rounded-full bg-[#0aa3e0]"></span><span class="text-ocean-900/90 text-sm">pH over time</span></div>
              <div class="h-48 sm:h-56"><canvas id="phChart"></canvas></div>
            </div>
            <!-- Salinity Chart -->
            <div>
              <div class="flex items-center gap-2 mb-2"><span class="w-2 h-2 rounded-full bg-[#17c9a4]"></span><span class="text-ocean-900/90 text-sm">Salinity over time</span></div>
              <div class="h-48 sm:h-56"><canvas id="salChart"></canvas></div>
            </div>
            <!-- Temperature Chart -->
            <div>
              <div class="flex items-center gap-2 mb-2"><span class="w-2 h-2 rounded-full bg-[#04658c]"></span><span class="text-ocean-900/90 text-sm">Temperature over time</span></div>
              <div class="h-48 sm:h-56"><canvas id="tempChart"></canvas></div>
            </div>
            <!-- TDS Chart -->
            <div>
              <div class="flex items-center gap-2 mb-2"><span class="w-2 h-2 rounded-full bg-[#8b5cf6]"></span><span class="text-ocean-900/90 text-sm">TDS over time</span></div>
              <div class="h-48 sm:h-56"><canvas id="tdsChart"></canvas></div>
            </div>
            <!-- Turbidity Chart -->
            <div class="lg:col-span-2">
              <div class="flex items-center gap-2 mb-2"><span class="w-2 h-2 rounded-full bg-[#ef4444]"></span><span class="text-ocean-900/90 text-sm">Turbidity over time</span></div>
              <div class="h-48 sm:h-56"><canvas id="turbChart"></canvas></div>
            </div>
          </div>
        </div>

        <p class="text-ocean-900/70 mt-3 text-xs">Auto-updating every few seconds. Resizes on small screens.</p>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="py-14">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="font-display text-2xl sm:text-3xl text-ocean-900">About Our Team</h2>
        <p class="text-ocean-900/80 mt-2">We combine marine science and data intelligence to help oyster farms thrive.</p>

        <div class="about-grid cols-4 mt-8">
          <!-- Team card -->
          <div class="glass rounded-2xl p-6 shadow-soft flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-sea-400 to-ocean-500 grid place-items-center text-white shadow-glow">
              <span class="text-xl">🧪</span>
            </div>
            <h4 class="mt-3 font-display text-ocean-900">Dr. Marina Lee</h4>
            <p class="text-ocean-900/70 text-sm">Marine Biologist</p>
            <p class="text-ocean-900/80 mt-3 text-sm">Specialist in estuarine ecology and oyster health.</p>
          </div>

          <div class="glass rounded-2xl p-6 shadow-soft flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-sea-400 to-ocean-500 grid place-items-center text-white shadow-glow">
              <span class="text-xl">🤖</span>
            </div>
            <h4 class="mt-3 font-display text-ocean-900">Alex Kim</h4>
            <p class="text-ocean-900/70 text-sm">AI Engineer</p>
            <p class="text-ocean-900/80 mt-3 text-sm">Builds predictive models for farm insights.</p>
          </div>

          <div class="glass rounded-2xl p-6 shadow-soft flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-sea-400 to-ocean-500 grid place-items-center text-white shadow-glow">
              <span class="text-xl">🌊</span>
            </div>
            <h4 class="mt-3 font-display text-ocean-900">Riley Santos</h4>
            <p class="text-ocean-900/70 text-sm">IoT Specialist</p>
            <p class="text-ocean-900/80 mt-3 text-sm">Designs robust sensor networks for waters.</p>
          </div>

          <div class="glass rounded-2xl p-6 shadow-soft flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-sea-400 to-ocean-500 grid place-items-center text-white shadow-glow">
              <span class="text-xl">🧭</span>
            </div>
            <h4 class="mt-3 font-display text-ocean-900">Sam Patel</h4>
            <p class="text-ocean-900/70 text-sm">Product Lead</p>
            <p class="text-ocean-900/80 mt-3 text-sm">Connects farmer needs with data tools.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="py-14 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="font-display text-2xl sm:text-3xl text-ocean-900">Contact Us</h2>
        <p class="text-ocean-900/80 mt-2">We’d love to hear from you. Drop us a message and we’ll get back soon.</p>

        <div class="contact-grid mt-8">
          <div class="glass rounded-2xl p-6 shadow-soft">
            <h3 class="font-display text-ocean-900 mb-3">Get in touch</h3>
            <p class="text-ocean-900/80 text-sm">Questions about deployments, integrations, or pilot programs? Send us a note.</p>
            <div class="mt-6 space-y-3 text-ocean-900/80 text-sm">
              <p>📍 Coastal Lab, Blue Bay</p>
              <p>✉️ hello@oysterai.example</p>
              <p>⏰ Mon–Fri, 9am–5pm</p>
            </div>
          </div>

          <form id="contactForm" novalidate class="glass rounded-2xl p-6 shadow-soft">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-ocean-900/80 mb-1">Name</label>
                <input type="text" id="name" class="w-full rounded-xl border border-ocean-100 px-4 py-3 focus-glow bg-white" placeholder="Your name" required>
                <p class="mt-1 text-red-600 text-sm hidden" id="nameErr">Please enter your name.</p>
              </div>
              <div>
                <label class="block text-ocean-900/80 mb-1">Email</label>
                <input type="email" id="email" class="w-full rounded-xl border border-ocean-100 px-4 py-3 focus-glow bg-white" placeholder="you@example.com" required>
                <p class="mt-1 text-red-600 text-sm hidden" id="emailErr">Please enter a valid email.</p>
              </div>
            </div>
            <div class="mt-4">
              <label class="block text-ocean-900/80 mb-1">Message</label>
              <textarea id="message" rows="5" class="w-full rounded-xl border border-ocean-100 px-4 py-3 focus-glow bg-white" placeholder="How can we help?" required></textarea>
              <p class="mt-1 text-red-600 text-sm hidden" id="msgErr">Please enter a message.</p>
            </div>
            <div class="mt-5 flex items-center gap-3">
              <button type="submit" class="bg-sea-500 hover:bg-sea-600 text-white px-5 py-3 rounded-xl shadow-glow smooth">Send Message</button>
              <span id="formStatus" class="text-ocean-800/80"></span>
            </div>
            <p class="text-xs text-ocean-900/60 mt-3">Demo notice: This form validates inputs locally only.</p>
          </form>
        </div>
      </div>
    </section>

  </main>

  <footer class="border-t border-ocean-100 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col md:flex-row items-center justify-between gap-4">
      <p class="text-ocean-900/70 text-sm">© <span id="year"></span> Oyster AI. All rights reserved.</p>
      <div class="flex items-center gap-4 text-sm">
        <a href="#about" class="text-ocean-900/80 hover:text-ocean-900 smooth">About</a>
        <a href="#contact" class="text-ocean-900/80 hover:text-ocean-900 smooth">Contact</a>
        <a href="#home" class="text-ocean-900/80 hover:text-ocean-900 smooth">Back to top</a>
      </div>
    </div>
  </footer>

  <script>
    // Helper: format time
    const fmt2 = (n)=> n.toString().padStart(2,'0');

    // Navbar sticky elevation on scroll
    const navbar = document.getElementById('navbar');
    const elevate = () => {
      if (window.scrollY > 6) navbar.classList.add('nav-elevated');
      else navbar.classList.remove('nav-elevated');
    };
    elevate();
    window.addEventListener('scroll', elevate, { passive: true });

    // Mobile menu toggle with simple slide effect
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    let menuOpen = false;
    menuBtn.addEventListener('click', () => {
      if (!menuOpen) {
        mobileMenu.classList.remove('hidden');
        mobileMenu.classList.add('slide-enter-active');
        menuOpen = true;
      } else {
        mobileMenu.classList.add('slide-exit-active');
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
          mobileMenu.classList.remove('slide-enter-active','slide-exit-active');
        }, 200);
        menuOpen = false;
      }
    });
    // Close menu on link click
    mobileMenu.querySelectorAll('a').forEach(a => a.addEventListener('click', ()=> {
      if (menuOpen) menuBtn.click();
    }));

    // Year in footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // ----------------- Simulated Live Data -----------------
    const monitorTableBody = document.getElementById('monitorTableBody');
    const monitorCards = document.getElementById('monitorCards');

    // Initial seed data
    let dataRows = [];
    const now = new Date();
    for (let i=5; i>0; i--) {
      const d = new Date(now.getTime() - i*5000);
      dataRows.push(sampleRow(d));
    }
    renderRows();

    // Generate a simulated row
    function sampleRow(dateObj = new Date()) {
      const ph = +(7.8 + Math.random()*0.6).toFixed(2);
      const sal = +(33 + Math.random()*4).toFixed(1);
      const temp = +(16 + Math.random()*6).toFixed(1);
      const tds = Math.floor(400 + Math.random()*300); // ppm
      const turb = +(2 + Math.random()*18).toFixed(1); // NTU
      const count = Math.floor(900 + Math.random()*200);
      const d = `${dateObj.getFullYear()}-${fmt2(dateObj.getMonth()+1)}-${fmt2(dateObj.getDate())}`;
      const t = `${fmt2(dateObj.getHours())}:${fmt2(dateObj.getMinutes())}:${fmt2(dateObj.getSeconds())}`;
      return { id: `${dateObj.getTime()}`, date: d, time: t, ph, sal, temp, tds, turb, count };
    }

    // Render rows to desktop table and mobile cards, updating in-place for performance
    function renderRows() {
      // Desktop table
      monitorTableBody.innerHTML = '';
      dataRows.slice(-15).forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'border-b border-ocean-50 hover:bg-ocean-50/50';
        tr.innerHTML = `
          <td class="py-3 px-4">${row.date}</td>
          <td class="py-3 px-4">${row.time}</td>
          <td class="py-3 px-4">${row.ph}</td>
          <td class="py-3 px-4">${row.sal}</td>
          <td class="py-3 px-4">${row.temp}</td>
          <td class="py-3 px-4">${row.tds}</td>
          <td class="py-3 px-4">${row.turb}</td>
          <td class="py-3 px-4">${row.count}</td>
        `;
        monitorTableBody.appendChild(tr);
      });

      // Mobile cards
      monitorCards.innerHTML = '';
      dataRows.slice(-10).forEach(row => {
        const card = document.createElement('div');
        card.className = 'glass rounded-xl p-4 shadow-soft';
        card.innerHTML = `
          <div class="data-row">
            <div><div class="data-label">Date</div><div class="data-value">${row.date}</div></div>
            <div><div class="data-label">Time</div><div class="data-value">${row.time}</div></div>
            <div><div class="data-label">pH</div><div class="data-value">${row.ph}</div></div>
            <div><div class="data-label">Salinity</div><div class="data-value">${row.sal} PSU</div></div>
            <div><div class="data-label">Temperature</div><div class="data-value">${row.temp} °C</div></div>
            <div><div class="data-label">TDS</div><div class="data-value">${row.tds} ppm</div></div>
            <div><div class="data-label">Turbidity</div><div class="data-value">${row.turb} NTU</div></div>
            <div><div class="data-label">Oyster Count</div><div class="data-value">${row.count}</div></div>
          </div>
        `;
        monitorCards.appendChild(card);
      });
    }

    // Update hero/stat cards with latest sample
    function updateHeroCards(sample) {
      const randGrow = +(1 + Math.random()*1.2).toFixed(1);
      const healthy = Math.max(70, Math.min(98, Math.round(85 + (sample.ph-8)*4 + (35 - Math.abs(35 - sample.sal))*0.5)));
      const risk = 100 - healthy;

      // Hero
      document.getElementById('heroPH').textContent = sample.ph;
      document.getElementById('heroSal').textContent = sample.sal;
      document.getElementById('heroTemp').textContent = sample.temp;
      document.getElementById('heroGrowth').textContent = randGrow;
      document.getElementById('heroHealthy').textContent = healthy;
      document.getElementById('heroRisk').textContent = risk;

      // Cards
      document.getElementById('cardPH').textContent = sample.ph;
      document.getElementById('cardSal').textContent = sample.sal;
      document.getElementById('cardTemp').textContent = sample.temp;
      document.getElementById('cardGrowth').textContent = randGrow;
      document.getElementById('cardHealthy').textContent = healthy;
      document.getElementById('cardRisk').textContent = risk;
    }

    // Periodic data simulation
    function tickData() {
      const sample = sampleRow(new Date());
      dataRows.push(sample);
      if (dataRows.length > 50) dataRows.shift();
      renderRows();
      updateHeroCards(sample);
      // Also push to charts
      pushChartData(sample);
    }
    const DATA_INTERVAL_MS = 4000;
    let dataTimer = setInterval(tickData, DATA_INTERVAL_MS);

    // ----------------- Charts (Chart.js) -----------------
    const phCtx = document.getElementById('phChart');
    const salCtx = document.getElementById('salChart');
    const tempCtx = document.getElementById('tempChart');

    function buildLineConfig(label, color, minY, maxY) {
      return {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label,
            data: [],
            borderColor: color,
            backgroundColor: color + '33',
            tension: 0.35,
            fill: true,
            pointRadius: 0,
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              ticks: { color: '#054e6d' },
              grid: { color: 'rgba(6,63,87,0.06)' }
            },
            y: {
              min: minY, max: maxY,
              ticks: { color: '#054e6d' },
              grid: { color: 'rgba(6,63,87,0.06)' }
            }
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: '#063f57',
              titleColor: '#fff',
              bodyColor: '#fff'
            }
          },
          animation: { duration: 300 }
        }
      };
    }

    const phChart = new Chart(phCtx, buildLineConfig('pH', '#0aa3e0', 7.4, 8.6));
    const salChart = new Chart(salCtx, buildLineConfig('Salinity', '#17c9a4', 30, 38));
    const tempChart = new Chart(tempCtx, buildLineConfig('Temperature', '#04658c', 12, 24));
    const tdsCtx = document.getElementById('tdsChart');
    const turbCtx = document.getElementById('turbChart');
    const tdsChart = new Chart(tdsCtx, buildLineConfig('TDS', '#8b5cf6', 0, 1000));
    const turbChart = new Chart(turbCtx, buildLineConfig('Turbidity', '#ef4444', 0, 100));

    // Seed charts with initial data
    dataRows.forEach(s => pushChartData(s, true));
    refreshAllCharts();

    // Push data into charts
    function pushChartData(sample, silent=false) {
      const ts = sample.time;
      const limit = 20;

      phChart.data.labels.push(ts);
      phChart.data.datasets[0].data.push(sample.ph);
      trimChart(phChart, limit);

      salChart.data.labels.push(ts);
      salChart.data.datasets[0].data.push(sample.sal);
      trimChart(salChart, limit);

      tempChart.data.labels.push(ts);
      tempChart.data.datasets[0].data.push(sample.temp);
      trimChart(tempChart, limit);

      // New metrics
      tdsChart.data.labels.push(ts);
      tdsChart.data.datasets[0].data.push(sample.tds);
      trimChart(tdsChart, limit);

      turbChart.data.labels.push(ts);
      turbChart.data.datasets[0].data.push(sample.turb);
      trimChart(turbChart, limit);

      if (!silent) refreshAllCharts();
    }

    function trimChart(chart, limit) {
      if (chart.data.labels.length > limit) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }
    }

    function refreshAllCharts() {
      phChart.update();
      salChart.update();
      tempChart.update();
      tdsChart.update();
      turbChart.update();
    }

    // Reset charts button
    document.getElementById('resetCharts').addEventListener('click', () => {
      [phChart, salChart, tempChart, tdsChart, turbChart].forEach(c => {
        c.data.labels = [];
        c.data.datasets[0].data = [];
      });
      // Seed a few fresh points immediately
      for (let i=0;i<5;i++){
        const s = sampleRow(new Date(Date.now() - (5-i)*1000));
        pushChartData(s, true);
      }
      refreshAllCharts();
    });

    // ----------------- Contact Form Validation -----------------
    const contactForm = document.getElementById('contactForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const messageInput = document.getElementById('message');
    const nameErr = document.getElementById('nameErr');
    const emailErr = document.getElementById('emailErr');
    const msgErr = document.getElementById('msgErr');
    const formStatus = document.getElementById('formStatus');

    function validateEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function showError(el, errEl, show) {
      if (show) {
        el.classList.add('border-red-500');
        errEl.classList.remove('hidden');
      } else {
        el.classList.remove('border-red-500');
        errEl.classList.add('hidden');
      }
    }

    contactForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const nameOk = nameInput.value.trim().length > 0;
      const emailOk = validateEmail(emailInput.value.trim());
      const msgOk = messageInput.value.trim().length > 0;

      showError(nameInput, nameErr, !nameOk);
      showError(emailInput, emailErr, !emailOk);
      showError(messageInput, msgErr, !msgOk);

      if (nameOk && emailOk && msgOk) {
        formStatus.textContent = 'Thanks! Your message was received (demo).';
        formStatus.className = 'text-sea-700';
        contactForm.reset();
        setTimeout(()=> formStatus.textContent = '', 4000);
      } else {
        formStatus.textContent = 'Please fix the highlighted fields.';
        formStatus.className = 'text-red-600';
      }
    });

    // Live validation hints
    [nameInput, emailInput, messageInput].forEach(input => {
      input.addEventListener('input', () => {
        if (input === emailInput) {
          showError(emailInput, emailErr, emailInput.value && !validateEmail(emailInput.value));
        } else {
          const err = input === nameInput ? nameErr : msgErr;
          showError(input, err, input.value.trim().length === 0);
        }
      });
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97d8317373a5db22',t:'MTc1NzYwNDQ4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
